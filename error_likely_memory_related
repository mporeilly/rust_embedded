➜  rust_embedded git:(advent) ✗ cargo build                                
   Compiling embedded_hello v0.1.0 (/home/popos/Desktop/rust_embedded)
error: linking with `rust-lld` failed: exit status: 1
  |
  = note: LC_ALL="C" PATH="/home/popos/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-gnu/bin:/home/popos/.cargo/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/popos/zig/zig-linux-x86_64-0.11.0:/home/popos/odin/odin-ubuntu-amd64-dev-2024-01:/home/popos/zig/zig-linux-x86_64-0.11.0:/home/popos/odin/odin-ubuntu-amd64-dev-2024-01" VSLANG="1033" "rust-lld" "-flavor" "gnu" "/tmp/rustcOF8JAq/symbols.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.10g22ikt6xt2aa8c.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.14aeoct0bqibzsyv.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.15j8pi9osz1o42g0.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.1avww82q0ajwbpc5.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.1ddk9ntmkoo4a8cb.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.1hn7agwxrykombv3.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.25s7mficx7ftjmjs.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.297q7omww8qj4lvo.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.2vcidtfecrw0o0xi.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.2vxz65hqz3yi7isd.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.2xfq08s862f13aqb.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.37zyp4sdf9ov834i.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.3a2nhnl7ipdefr5i.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.3it3imbyq6g5bmgf.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.3opx9vpw6g3k29a6.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.3vajaoaf5en9tdhw.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.3yfhyb9inhf79wac.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.4b45uu9uhalvvxma.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.4f25ibn9h13tetcr.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.4kptfpk1cbhk2kmz.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.4n8chsh2kjijvmbi.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.4piylh6rjj4z6eos.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.4tn4fmjrgsu8zwnk.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.5akjvvrm8q62g6to.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.5b61wswg3wqk1v5y.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.5cakn05bdbragqnd.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.5vc5vxu07lvva64.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.ehcylgdwsyt83z.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.etgib9qsp0tli4z.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.nse2d3hrxqrzncx.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.od7kmern9zf9xn2.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.r4is9sky5ox3n9x.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.tddqsh0q90xlz3j.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.vzbraesvycalln3.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.z6l44b3cljxnvp.rcgu.o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244.4osmo9gtpsetnpa9.rcgu.o" "--as-needed" "-L" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps" "-L" "/home/popos/Desktop/rust_embedded/target/debug/deps" "-L" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/build/cortex-m-rt-a1cd206e94271a76/out" "-L" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/build/cortex-m-semihosting-a6bd53deb4963815/out" "-L" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/build/cortex-m-6d0d19bf0a448b2f/out" "-L" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/build/stm32f3-discovery-5389910568ea48f6/out" "-L" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/build/stm32f3-a6d4d3bd36c5b6c8/out" "-L" "/home/popos/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/thumbv7em-none-eabihf/lib" "-Bstatic" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libstm32f3_discovery-3270a77b18d08807.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libswitch_hal-043d1974c82bbbbf.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libstm32f3xx_hal-f101a4390586b164.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/librtcc-02247f2b5bc91072.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libchrono-5298f55e199b62db.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libembedded_dma-2dccdc6102608516.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libstable_deref_trait-a1a1f721d2a8fdf4.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libstm32f3-66364100bd0c2b34.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libembedded_time-eb99ab0d75a58b06.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libnum-0b994fec59afc2bc.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libnum_iter-265e6b55bb8bced1.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libnum_rational-ccbce3042c94636e.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libnum_integer-67f9eb103d13343a.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libnum_complex-2a2e365b43b13e03.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libnum_traits-52534f4ceff17e21.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libcfg_if-8b100146b2d97b1e.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/liblsm303dlhc-8d7427616db0d009.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libgeneric_array-4765ee1b0fd525cd.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libcast-6dc32f7db4b664cb.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libaccelerometer-94e08e354e6bb1f0.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libmicromath-245934065fd7b9eb.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libgeneric_array-4b8f4da6557b722e.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libtypenum-9244df54f8202a78.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libcortex_m_semihosting-d5094289ca2923e6.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libcortex_m-cbe9c04ec829f294.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libembedded_hal-ec662f90531140be.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libvoid-2f4984912d3d54de.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libnb-1b293ef6dddd42aa.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libnb-534a1f7637b6a7be.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libvolatile_register-ffb1d1b663832f04.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libvcell-50bb6aafc8706eee.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libbare_metal-dcc1d24cb5659843.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libpanic_halt-877259ad16c4044f.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libembedded_alloc-2bf0380035c32982.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/liblinked_list_allocator-528c9de57ccddcf7.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libcritical_section-09f0788a2027c6fa.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libcortex_m_rt-5e87e355662eae94.rlib" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libr0-33f608bc00f945e8.rlib" "/home/popos/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/thumbv7em-none-eabihf/lib/liballoc-7abbc16fc1c7187c.rlib" "/home/popos/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/thumbv7em-none-eabihf/lib/librustc_std_workspace_core-07104bd2a3619ed8.rlib" "/home/popos/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/thumbv7em-none-eabihf/lib/libcore-08e1c42936b63518.rlib" "/home/popos/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/thumbv7em-none-eabihf/lib/libcompiler_builtins-299473c23a4951e8.rlib" "-Bdynamic" "--eh-frame-hdr" "-z" "noexecstack" "-L" "/home/popos/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/thumbv7em-none-eabihf/lib" "-o" "/home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/embedded_hello-5b34995b01f36244" "--gc-sections" "-Tlink.x"
  = note: rust-lld: error: undefined symbol: _critical_section_1_0_acquire
          >>> referenced by lib.rs:183 (/home/popos/.cargo/registry/src/index.crates.io-6f17d22bba15001f/critical-section-1.1.2/src/lib.rs:183)
          >>>               embedded_alloc-2bf0380035c32982.embedded_alloc.520be85327a0f5ba-cgu.0.rcgu.o:(critical_section::with::h1d3c7bed68d8efac) in archive /home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libembedded_alloc-2bf0380035c32982.rlib
          >>> referenced by lib.rs:183 (/home/popos/.cargo/registry/src/index.crates.io-6f17d22bba15001f/critical-section-1.1.2/src/lib.rs:183)
          >>>               embedded_alloc-2bf0380035c32982.embedded_alloc.520be85327a0f5ba-cgu.0.rcgu.o:(critical_section::with::h80923b9e7c23079a) in archive /home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libembedded_alloc-2bf0380035c32982.rlib
          >>> referenced by lib.rs:183 (/home/popos/.cargo/registry/src/index.crates.io-6f17d22bba15001f/critical-section-1.1.2/src/lib.rs:183)
          >>>               embedded_alloc-2bf0380035c32982.embedded_alloc.520be85327a0f5ba-cgu.0.rcgu.o:(critical_section::with::hc3f1081aa8c01cea) in archive /home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libembedded_alloc-2bf0380035c32982.rlib
          
          rust-lld: error: undefined symbol: _critical_section_1_0_release
          >>> referenced by lib.rs:200 (/home/popos/.cargo/registry/src/index.crates.io-6f17d22bba15001f/critical-section-1.1.2/src/lib.rs:200)
          >>>               embedded_alloc-2bf0380035c32982.embedded_alloc.520be85327a0f5ba-cgu.0.rcgu.o:(core::ptr::drop_in_place$LT$critical_section..with..Guard$GT$::hcf2674d895f6ebcb) in archive /home/popos/Desktop/rust_embedded/target/thumbv7em-none-eabihf/debug/deps/libembedded_alloc-2bf0380035c32982.rlib
          
          rust-lld: warning: address (0x8012378) of section .rodata is not a multiple of alignment (16)
          

error: could not compile `embedded_hello` (bin "embedded_hello") due to previous error